function b64_423(str){b64table=new Array('A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','-','_');var binary=new String();for(var i=0;i<str.length;i++){for(var j=0;j<64;j++){if(str.charAt(i)==b64table[j]){var bin=j.toString(2);binary+=("000000"+bin).substr(bin.length);break}}if(j==64){if(i==2){return binary.substr(0,8)}else{return binary.substr(0,16)}}}return binary}function b2i(str){var x=0;var k=128;for(var i=0;i<8;i++,k=k/2){if(str.charAt(i)=="1"){x+=k}}return String.fromCharCode(x)}function b64_decodex(str){var ret=new Array();var i;var x="";for(i=0;i<str.length;i+=4){x+=b64_423(str.substr(i,4))}for(i=0;i<x.length;i+=8){ret+=b2i(x.substr(i,8))}return ret}function utf8to16(str){var out,i,j,len,c,c2,c3,c4,s;out=[];len=str.length;i=j=0;while(i<len){c=str.charCodeAt(i++);switch(c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:out[j++]=str.charAt(i-1);break;case 12:case 13:c2=str.charCodeAt(i++);out[j++]=String.fromCharCode(((c&0x1f)<<6)|(c2&0x3f));break;case 14:c2=str.charCodeAt(i++);c3=str.charCodeAt(i++);out[j++]=String.fromCharCode(((c&0x0f)<<12)|((c2&0x3f)<<6)|(c3&0x3f));break;case 15:switch(c&0xf){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c2=str.charCodeAt(i++);c3=str.charCodeAt(i++);c4=str.charCodeAt(i++);s=((c&0x07)<<18)|((c2&0x3f)<<12)|((c3&0x3f)<<6)|(c4&0x3f)-0x10000;if(0<=s&&s<=0xfffff){out[j]=String.fromCharCode(((s>>>10)&0x03ff)|0xd800,(s&0x03ff)|0xdc00)}else{out[j]='?'}break;case 8:case 9:case 10:case 11:i+=4;out[j]='?';break;case 12:case 13:i+=5;out[j]='?';break}}j++}return out.join('')}function getStringLen(str){var cArr=str.match(/[^\x00-\xff]/ig);return str.length+(cArr==null?0:cArr.length)}var login_status="";var logout_status="";var PassportSC={cvsid:"$Id: pp18030.js,v 1.75 2007/03/27 04:22:19 qyb Exp $",appid:9999,max_line_length:30,domain:"",cookie:false,email:"",autopad:"",autoRedirectUrl:"",loginRedirectUrl:"",selectorTitle:"",registerUrl:"http://passport.sohu.com/web/signup.jsp",recoverUrl:"http://passport.sohu.com/web/recover.jsp",usehttp:0,postru:"",emailPostfix:false,bindDomainSelector:true,curDSindex:-1,rootElement:false,dsElement:false,sElement:false,cElement:false,dsAnchor:false,emailInput:false,passwdInput:false,pcInput:false,loginMsg:false,iElement:false,eInterval:false,maxIntervalCount:100,intervalCount:0,defaultApp:"",domainPool:["chinaren.com","sogou.com"],domainList:["sohu.com","chinaren.com","sogou.com","vip.sohu.com","17173.com","focus.cn","game.sohu.com"],appList:{"1000":"mail","1005":"alumni","10050":"chinaren","1019":"blog","1017":"pp","1001":"club","1038":"crclub","1039":"xiaonei","1021":"music","1010":"say","1042":"cbbs"},appName:{"mail":"邮件","alumni":"校友录","chinaren":"ChinaRen","blog":"博客","pp":"相册","club":"搜狐社区","crclub":"CR社区","xiaonei":"校内","music":"音乐盒","say":"说吧","cbbs":"校友论坛"},appUrl:{"mail":"","alumni":"http://alumni.chinaren.com","chinaren":"","blog":"http://blog.sohu.com/","pp":"http://pp.sohu.com/","club":"http://club.sohu.com","crclub":"http://club.chinaren.com","xiaonei":"http://xiaonei.chinaren.com","say":"http://passport.sogou.com/sso/autopassport.jsp?ru=http://s.sogou.com","music":"http://passport.sogou.com/sso/autopassport.jsp?ru=http://d.sogou.com/coo/blog/loginMusicBox.so","cbbs":"http://cbbs.chinaren.com"},appPool:false,bottomRow:[],recomServ:[],getDomain:function(){var hostname=document.domain.split('.');var l=hostname.length;if(l<=2){return document.domain}return hostname[l-2]+'.'+hostname[l-1]},preventEvent:function(evt){evt.cancelBubble=true;evt.returnValue=false;if(evt.preventDefault){evt.preventDefault()}if(evt.stopPropagation){evt.stopPropagation()}},getPosition:function(ele,name){var pos=0;while(ele){pos+=ele[name];ele=ele.offsetParent}return pos},getTime:function(){var x=new Date();return x.getTime()},reportMsg:function(code){var msg='';switch(code){case'1':msg+='请输入通行证用户名';break;case'2':msg+='通行证用户名为邮件地址格式';break;case'3':msg+='用户名后缀必须为'+arguments[1];break;case'4':msg+='请输入通行证密码';break;case'5':msg+='用户名或密码错误';break;case'6':msg+='登录超时，请稍后重试';break;case'7':msg+='登录失败，请重试';break;case'8':msg+='网络故障，退出失败，请重新退出';break;case'9':msg+='登录失败，请稍后重试';break;case'10':msg+='暂时不可登录，请稍后重试';break;default:msg+='登录错误，请稍后重试'}this.showMsg(msg)},showMsg:function(msg){if(!this.loginMsg)return;this.loginMsg.innerHTML=msg},parsePassportCookie:function(){var cookies=document.cookie.split('; ');for(var i=0;i<cookies.length;i++){if(cookies[i].indexOf('passport=')==0){var cookievalue=cookies[i].substr(9);try{var x=unescape(cookievalue).split('|');if(x[0]=='1'){var cookie_raw_info=utf8to16(b64_decodex(x[3]));this._parsePassportCookie(cookie_raw_info);return}}catch(e){break}}}this.cookie=false},cookieHandle:function(){if(!this.cookie){this.parsePassportCookie()}if(this.cookie&&this.cookie['userid']!=''){return this.cookie['userid']}else{return""}},_parsePassportCookie:function(str){var keyStart_offset;var eq_offset;var lenEnd_offest;this.cookie=new Object;keyStart_offset=0;eq_offset=str.indexOf(':',keyStart_offset);while(eq_offset!=-1){var k;var l;var v;k=str.substring(keyStart_offset,eq_offset);lenEnd_offset=str.indexOf(':',eq_offset+1);if(lenEnd_offset==-1){break}l=parseInt(str.substring(eq_offset+1,lenEnd_offset));v=str.substr(lenEnd_offset+1,l);if(str.charAt(lenEnd_offset+1+l)!='|'){break}this.cookie[k]=v;keyStart_offset=lenEnd_offset+2+l;eq_offset=str.indexOf(':',keyStart_offset)}try{this.cookie['service']=new Object;var x=this.cookie['service'];x['mail']=0;x['alumni']=0;x['chinaren']=0;x['blog']=0;x['pp']=0;x['club']=0;x['crclub']=0;x['xiaonei']=0;x['say']=0;x['music']=0;var y=this.cookie['serviceuse'];if(y.charAt(0)==1){x['mail']='sohu'}else if(y.charAt(2)==1){x['mail']='sogou'}else if(y.charAt(6)==1){x['mail']='chinaren'}if(y.charAt(1)==1){x['alumni']=1}if(y.charAt(3)==1){x['blog']=1}if(y.charAt(4)==1){x['pp']=1}if(y.charAt(5)==1){x['club']=1}if(y.charAt(7)==1){x['crclub']=1}if(y.charAt(8)==1){x['xiaonei']=1}if(y.charAt(9)==1){x['say']=1}if(y.charAt(10)==1){x['music']=1}}catch(e){}},getBottomRow:function(){var i=0;var length=this.max_line_length-getStringLen(this.defaultApp);this.bottomRow[0]=new Array();this.bottomRow[1]=new Array();if(!this.cookie)return;i=this._getBottomRow(this.bottomRow[0],length,0);length=this.max_line_length;i=this._getBottomRow(this.bottomRow[1],length,i)},_getBottomRow:function(row,len,offset){var app,j;var x=this.cookie['service'];var y=this.appPool;var i=offset;var strlen;for(j=0;i<y.length;i++){app=y[i]["app"];if(typeof(app)!='string')continue;if(typeof(x[app])=="undefined")continue;if(x[app]!=0){strlen=getStringLen(y[i]["name"]);if(len-strlen<0)break;len-=(strlen+2);row[j]=y[i];if(app=="mail"){if(x["mail"]=="sohu"){row[j]["url"]="http://mail.sohu.com"}else if(x["mail"]=="sogou"){row[j]["url"]="http://mail.sogou.com/2gmail/login.jsp"}else{row[j]["url"]="http://mail.chinaren.com"}}j++}else{if(y[i]["name"]=="ChinaRen"){continue}var relen=this.recomServ.length;this.recomServ[relen]=y[i];if(app=="mail"){this.recomServ[relen]["url"]="http://mail.chinaren.com"}}}return i},parseLastDomain:function(list){this.emailPostfix=new Array();var lastdomain_ar=new Array();var lastdomain="",useridar="",lastdomain_ar;var cookies=document.cookie.split('; ');for(var i=0;i<cookies.length;i++){if(cookies[i].indexOf('lastdomain=')==0){try{lastdomain_ar=unescape(cookies[i].substr(11)).split('|')}catch(e){}break}}var j=0;if(lastdomain_ar.length>=3){var userid_raw_info=utf8to16(b64_decodex(lastdomain_ar[1]));var userid_ar=userid_raw_info.split("|");for(var i=0;i<userid_ar.length;i++){if(userid_ar[i]!=""){this.emailPostfix[j]=userid_ar[i];j++}}}if(lastdomain!=""){this.emailPostfix[j]=lastdomain;j++;if(lastdomain!=this.domain){this.emailPostfix[j]=this.domain;j++}}else{this.emailPostfix[j]=this.domain;j++}for(var i in list){if(typeof(list[i])!='string')continue;if(list[i]!=lastdomain&&list[i]!=this.domain){this.emailPostfix[j]=list[i];j++}}},parseAppid:function(){var id=this.appid.toString();var i=0;this.appPool=new Array();for(var j in this.appList){var x=this.appList[j];if(typeof(x)!='string')continue;if(j==id){this.defaultApp=this.appName[x]}else{this.appPool[i]={"app":x,"name":this.appName[x],"url":this.appUrl[x]};i++}}},cdLoginUrl:function(domain){var ctime=PassportSC.getTime();if(document.location.protocol=='http:'){return"http://passport.sohu.com/sso/crossdomain.jsp?domain="+domain+"&action=login&s="+ctime}else{return"https://passport.sohu.com/sso/crossdomain.jsp?domain="+domain+"&action=login&s="+ctime}},autoProcAllDomain:function(f,ele){var newScript,url,x,domain;for(x in this.domainPool){domain=this.domainPool[x];if(typeof(domain)!='string')continue;if(this.domain==domain)continue;url=f(domain);if(url){newScript=document.createElement("script");newScript.src=url;ele.appendChild(newScript)}}},setDomainCookie:function(ele,domain,lsc,lfc){login_status="";crossdomain_status="";var curl=PassportSC.cdLoginUrl(domain);if(curl){newScript=document.createElement("script");newScript.src=curl;ele.appendChild(newScript)}PassportSC.eInterval=setInterval(function(){PassportSC.setCookieIntervalProc(ele,lsc,lfc)},100)},setCookieIntervalProc:function(ele,lsc,lfc){if(crossdomain_status!=""){clearInterval(PassportSC.eInterval);PassportSC.eInterval=false;lfc();return}if(login_status==""&&PassportSC.intervalCount<PassportSC.maxIntervalCount){PassportSC.intervalCount++;return}clearInterval(PassportSC.eInterval);PassportSC.eInterval=false;if(login_status!="success"||this.intervalCount>=this.maxIntervalCount){lfc();return}lsc()},strip:function(s){return s.replace(/^\s+/,'').replace(/\s+$/,'')},doPost:function(){for(var i=0;i<document.forms.length;i++){if(document.forms[i].name=="loginform"){break}}if(i==document.forms.length){document.location.href="http://passport.sohu.com";return false}document.forms[i].action="http://passport.sohu.com/sso/login_js.jsp?appid="+this.appid+"&ru="+this.postru;document.forms[i].submit();return false},doLogin:function(){if(this.eInterval)return;login_status="";this.intervalCount=0;this.sElement.innerHTML="";this.email=this.strip(this.emailInput.value);var email=this.email;var password=this.strip(this.passwdInput.value);var pc=0;if(this.pcInput.checked==true)pc=1;if(email==""){this.reportMsg('1');this.emailInput.focus();return false}if(email.indexOf('@')==-1){if(this.autopad!=""){email=email+'@'+this.autopad}else{this.reportMsg('2');this.emailInput.focus();return false}}if(this.autopad!=""){var dpostfix=email.substr(email.indexOf('@')+1);if(this.autopad!=dpostfix){this.reportMsg('3',this.autopad);this.emailInput.focus();this.passwdInput.value="";return false}}if(password==""){this.reportMsg('4');this.passwdInput.value="";this.passwdInput.focus();return false}if(this.usehttp==1){return this.doPost()}this.drawPassportWait('正在登录搜狐通行证，请稍候...');return this.loginHandle(email,password,pc,PassportSC.sElement,PassportSC.loginFailCall,PassportSC.loginSuccessCall)},loginHandle:function(user_id,pwd,pc,ele,lfc,lsc){if(typeof(ele)!="object"){return false}if(this.domain==""){this.domain=this.getDomain()}var ra=this.getTime();var url="https://passport.sohu.com/sso/login.jsp?userid="+user_id+"&password="+encodeURIComponent(pwd)+"&appid="+this.appid+"&persistentcookie="+pc+"&s="+ra;if(this.domain!="sohu.com"){url+="&domain="+this.domain}var newScript=document.createElement("script");newScript.src=url;ele.appendChild(newScript);this.eInterval=setInterval(function(){PassportSC.loginIntervalProc(lfc,lsc,ele)},100);return false},loginIntervalProc:function(lfc,lsc,ele){if(login_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(login_status!="success"||this.intervalCount>=this.maxIntervalCount){lfc();return}this.autoProcAllDomain(PassportSC.cdLoginUrl,ele);lsc()},loginFailCall:function(){PassportSC.sElement.innerHTML="";PassportSC.drawLoginForm();if(PassportSC.intervalCount>=PassportSC.maxIntervalCount){PassportSC.reportMsg('6');PassportSC.emailInput.focus()}else if(login_status=='error3'||login_status=='error2'){PassportSC.reportMsg('5');PassportSC.passwdInput.focus()}else if(login_status=='error5'){PassportSC.reportMsg('10');PassportSC.passwdInput.focus()}else{PassportSC.reportMsg('9');PassportSC.passwdInput.focus()}},loginSuccessCall:function(){PassportSC.parsePassportCookie();if(PassportSC.cookie&&PassportSC.cookie['userid']!=''){PassportSC.email="";if(PassportSC.loginRedirectUrl!=""){if(PassportSC.cookie['service']['mail']!="0"&&(PassportSC.appid=="1000"||PassportSC.appid=="1014"||PassportSC.appid=="1037")){if(PassportSC.domain.indexOf(PassportSC.cookie['service']['mail'])==-1){PassportSC.drawLoginForm()}else{setTimeout(function(){document.location.href=PassportSC.loginRedirectUrl},2000)}}else{setTimeout(function(){if(document.location.href==PassportSC.loginRedirectUrl){document.location.reload()}else{document.location.href=PassportSC.loginRedirectUrl}},2000)}}else{PassportSC.getBottomRow();PassportSC.drawPassportCard()}}else{PassportSC.drawLoginForm();PassportSC.reportMsg('7')}},doLogout:function(){if(this.eInterval)return;logout_status="";this.intervalCount=0;this.sElement.innerHTML="";this.logoutHandle(this.sElement,PassportSC.logoutFailCall,PassportSC.logoutSuccessCall)},logoutHandle:function(ele,lfc,lsc){if(typeof(ele)!="object"){return false}if(this.domain==""){this.domain=this.getDomain()}var ra=this.getTime();if(document.location.protocol=='http:'){var url='http://passport.sohu.com/sso/logout.jsp?s='+ra}else{var url='https://passport.sohu.com/sso/logout.jsp?s='+ra}if(this.domain!="sohu.com"){url+="&domain="+this.domain}var newScript=document.createElement("script");newScript.src=url;ele.appendChild(newScript);this.eInterval=setInterval(function(){PassportSC.logoutIntervalProc(lfc,lsc,ele)},100)},logoutIntervalProc:function(lfc,lsc,ele){if(logout_status==""&&PassportSC.intervalCount<PassportSC.maxIntervalCount){PassportSC.intervalCount++;return}clearInterval(PassportSC.eInterval);PassportSC.eInterval=false;if(logout_status!="success"||PassportSC.intervalCount>=PassportSC.maxIntervalCount){lfc();return}PassportSC.autoProcAllDomain(PassportSC.cdLogoutUrl,ele);lsc()},logoutFailCall:function(){PassportSC.sElement.innerHTML="";PassportSC.reportMsg('8')},logoutSuccessCall:function(){PassportSC.parseLastDomain(PassportSC.domainList);PassportSC.drawLoginForm();try{logoutApp()}catch(e){}},cdLogoutUrl:function(domain){var curtime=PassportSC.getTime();if(document.location.protocol=='http:'){var vurl="http://passport.sohu.com/sso/crossdomain.jsp?s="+curtime+"&action=logout&domain="}else{var vurl="https://passport.sohu.com/sso/crossdomain.jsp?s="+curtime+"&action=logout&domain="}if(domain=="chinaren.com")return vurl+"chinaren.com";if(domain=="sogou.com")return vurl+"sogou.com";return false},downDSindex:function(){var x=this.dsAnchor.firstChild.rows;var i=0;for(;i<x.length;i++){if(x[i].firstChild.idx==this.curDSindex)break}if(i>=x.length-1){this.curDSindex=x[0].firstChild.idx}else{this.curDSindex=x[i+1].firstChild.idx}},upDSindex:function(){var x=this.dsAnchor.firstChild.rows;var last=-1;var i=0;for(;i<x.length;i++){if(x[i].firstChild.idx==this.curDSindex)break;last=x[i].firstChild.idx}if(i==x.length){this.curDSindex=x[0].firstChild.idx}else if(last==-1){this.curDSindex=x[x.length-1].firstChild.idx}else{this.curDSindex=last}},findDSindex:function(index){try{var x=this.dsAnchor.firstChild.rows;for(var i=0;i<x.length;i++){if(x[i].firstChild.idx==index)return x[i].firstChild}}catch(e){}return false},clearFocus:function(index){if(typeof(index)!="number")index=this.curDSindex;try{var x=this.findDSindex(index);x.className='';x.style.fontWeight='normal'}catch(e){}},setFocus:function(index){if(typeof(index)!="number")index=this.curDSindex;try{var x=this.findDSindex(index);x.className='active'}catch(e){}},fillEmailSelect:function(){var e=this.emailInput.value;if(e==""){this.dsElement.style.display="none";return}var x_postfix="";var x_prefix="";var x_index=e.indexOf("@");if(x_index<0){x_prefix=e}else if(x_index==e.length-1){x_prefix=e.substr(0,x_index)}else{x_prefix=e.substr(0,x_index);x_postfix=e.substr(x_index+1)}var mleft=this.getPosition(this.emailInput,"offsetLeft")-this.getPosition(this.cElement,"offsetLeft");if(document.all&&!document.addEventListener){mleft+=1}this.dsElement.style.marginLeft=mleft+"px";this.dsElement.style.marginTop=(this.getPosition(this.emailInput,"offsetTop")-this.getPosition(this.cElement,"offsetTop")+this.emailInput.offsetHeight)+"px";this.dsElement.style.zIndex="2000";this.dsElement.style.paddingRight="0";this.dsElement.style.paddingLeft="0";this.dsElement.style.paddingTop="0";this.dsElement.style.paddingBottom="0";this.dsElement.style.backgroundColor="white";this.dsElement.style.display="block";var myTable=document.createElement("TABLE");myTable.width="100%";myTable.cellSpacing=0;myTable.cellPadding=3;var tbody=document.createElement("TBODY");myTable.appendChild(tbody);var j=0;var haveCurrent=false;var isUserid=false;var firstItem=-1;var userid_postfix="",userid_prefix="";for(var i=0;i<this.emailPostfix.length;i++){var postfix=this.emailPostfix[i];if(typeof(postfix)!='string')continue;if(x_postfix!=""){if(postfix.indexOf(x_postfix)!=0)continue}if(postfix.indexOf("@")>0){if(this.autopad!=""&&this.autopad!=postfix.substring(postfix.indexOf("@")+1)){continue}userid_prefix=postfix.substring(0,postfix.indexOf("@"));if(userid_prefix.indexOf(x_prefix)!=0){continue}if(userid_prefix==x_prefix){userid_postfix=postfix.substring(postfix.indexOf("@")+1)}isUserid=true}else{if(this.autopad!=""&&this.autopad!=postfix){continue}}if(postfix==userid_postfix){continue}j++;if(firstItem==-1)firstItem=i;if(this.curDSindex==i)haveCurrent=true;var tr=document.createElement("TR");var td=document.createElement("TD");td.nowrap="true";td.align="left";if(isUserid==false){td.innerHTML=x_prefix+"@"+postfix}else{td.innerHTML=postfix}td.id="email_postfix_"+i;td.idx=i;td.onmouseover=function(){PassportSC.clearFocus();PassportSC.curDSindex=this.idx;PassportSC.setFocus();this.style.cursor="hand"};td.onmouseout=function(){};td.onclick=function(){PassportSC.doSelect()};tr.appendChild(td);tbody.appendChild(tr);isUserid=false}if(j>0){this.dsAnchor.innerHTML="";this.dsAnchor.appendChild(myTable);if(haveCurrent==false)this.curDSindex=firstItem;this.setFocus()}else{this.dsElement.style.display="none";this.curDSindex=-1}},doSelect:function(setPWfocus){this.dsElement.style.display="none";if(this.emailInput.value=="")return;var x=this.findDSindex(this.curDSindex);if(x)this.emailInput.value=x.innerHTML;if(this.emailInput.value!="")this.passwdInput.focus()},checkKeyDown:function(event){var keyCode=event.keyCode;if(keyCode==38||keyCode==40){PassportSC.clearFocus();if(keyCode==38)PassportSC.upDSindex();else PassportSC.downDSindex();PassportSC.setFocus()}else if(keyCode==8||keyCode==46){setTimeout(function(){PassportSC.fillEmailSelect()},10)}},checkKeyPress:function(event){var keyCode=event.keyCode;if(keyCode==38||keyCode==13||keyCode==40){PassportSC.preventEvent(event);if(keyCode==13){PassportSC.doSelect()}else{PassportSC.clearFocus();if(keyCode==38)PassportSC.upDSindex();else if(keyCode==40)PassportSC.downDSindex();PassportSC.setFocus()}}else if(keyCode!=9){setTimeout(function(){PassportSC.fillEmailSelect()},10)}},init:function(element){if(this.selectorTitle==""){var title="请选择您的用户帐号类型"}else{var title=this.selectorTitle}this.rootElement=element;this.rootElement.innerHTML='<div class="ppselecter" style="position: absolute; display: none;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td style="" class="ppseltit">'+title+'</td></tr><tr><td height="2" /></tr><tr><td /></tr></tbody></table></div><div style="display: none;"></div><div class="passport"></div>';this.dsElement=this.rootElement.childNodes[0];this.sElement=this.rootElement.childNodes[1];this.cElement=this.rootElement.childNodes[2];this.dsAnchor=this.dsElement.firstChild.rows[2].firstChild;this.domain=this.getDomain();this.parseLastDomain(this.domainList);this.parseAppid();this.parsePassportCookie();this.getBottomRow();if(this.postru==""){this.postru=document.location.href}},drawPassportCard:function(){var html='<div class="pptitle"name="pptitle"id="ppcard">\<div class="pptLeft">搜狐<span class="color01">通行证</span></div>\<div class="pptRight"><a href="javascript:PassportSC.doLogout();">退出</a></div>\</div>\<div class="ppContA">\<div class="ppblank4"></div>\<div class="listContA"id="ppdrawinfo"></div>\<div class="list">';if(this.defaultApp!=""){html+='\<div class="listL">' + this.defaultApp + '</div>'}html+='\<div class="listR">\<ul>\<li><img src="http://images.sohu.com/passport/v3/cardstyle/images/spacer.gif"alt="去"/></li>';for(var i=0;i<this.bottomRow[0]['length'];i++){html+='\<li><a href="'+this.bottomRow[0][i]['url']+'"target="_blank">'+this.bottomRow[0][i]['name'] + '</a></li>';if(i!=(this.bottomRow[0].length-1))html+='<li>|</li>'}html+='\</ul>\</div>\<div class="listA">\<div class="listAL">\<ul>';for(var i=0;i<this.bottomRow[1]['length'];i++){html+='\<li><a href="'+this.bottomRow[1][i]['url']+'"target="_blank">'+this.bottomRow[1][i]['name'] + '</a></li>';if(i!=(this.bottomRow[1].length-1))html+='<li>|</li>'}html+='\</ul>\</div>\<div class="listAR"';var at=this.cookie['userid'].indexOf("@");if(at>0){var userdomain=this.cookie['userid'].substr(at+1);if(userdomain!='sohu.com'&&userdomain!='chinaren.com'&&userdomain!='sogou.com'){html+='style="display:none"'}}html+='><a href="http://blog.sohu.com/camp"target="_blank"><img src="http://images.sohu.com/passport/v3/cardstyle/images/spacer.gif"alt="大本营"/></a></div>\</div>\</div>\</div>';this.cElement.innerHTML=html;this.$iElement();try{drawAppInfo(PassportSC.iElement)}catch(e){this.drawPassportInfo()}},$iElement:function(){var x=this.cElement.getElementsByTagName("div");for(var i=0;i<x.length;i++){if(x[i].className=="listContA"){this.iElement=x[i];break}}},drawPassportWait:function(str){this.cElement.innerHTML='<div class="pptitle"name="pptitle">\<div class="pptLeft">搜狐<span class="color01">通行证</span></div>\<div class="pptRight"><img src="http://images.sohu.com/passport/v3/cardstyle/images/spacer.gif"alt=""/></div>\</div>\<div class="ppContA">\<div id="ppWaitMsg"class="txt">' + str + '</div>\</div>'},drawPassportInfo:function(){html='<div class="ppDefWel"><h3>'+this.cookie['userid']+'</h3><p>欢迎您，您已经成功登录搜狐通行证！ </p><p><span>现在即可畅游搜狐所有服务。</span></p></div>';this.iElement.innerHTML=html},getRanServ:function(){var relen=this.recomServ.length;if(relen==0)return"";var i=Math.floor(relen*(Math.random()));var rtn='<a href="'+this.recomServ[i]['url']+'" target="_blank">'+this.recomServ[i]['name']+"</a>";if(relen==1)return rtn;var j=Math.floor(relen*(Math.random()));while(i==j){j=Math.floor(relen*(Math.random()))}rtn+=' | <a href="'+this.recomServ[j]['url']+'" target="_blank">'+this.recomServ[j]['name']+"</a>";return rtn},_drawLoginForm:function(){this.cElement.innerHTML='<form method="post"onsubmit="return PassportSC.doLogin();"name="loginform">\<div class="pptitle"name="pptitle">\<div class="pptLeft">搜狐<span class="color01">通行证</span></div>\<div class="pptRight"><img src="http://images.sohu.com/passport/v3/cardstyle/images/spacer.gif"alt=""/></div>\</div>\<div class="ppContA">\<h3>&nbsp;</h3>\<div class="user">\<div class="userL">用户名</div>\<div class="userR"><input name="email"type="text"class="ppinput01"autocomplete="off"disableautocomplete/></div>\</div>\<div class="ppblank3_5"></div>\<div class="user">\<div class="userL">密&nbsp;&nbsp;码</div>\<div class="userR"><input name="password"type="password"class="ppinput01"autocomplete="off"disableautocomplete/></div>\</div>\<div class="ppblank6_8"></div>\<div class="validate">\<div class="valL">&nbsp;</div>\<div class="valC"><input name="persistentcookie"type="checkbox"class="ppmargr"value="1"/>记住密码</div>\<div class="valR"><input type="submit"value="登 录"src="http://images.sohu.com/passport/v3/cardstyle/images/spacer.gif"alt="登 录"/></div>\</div>\<div class="ppblank8"></div>\<div class="txtList">\<div class="txtL"><a href="'+this.registerUrl+'"target="_blank">注册新用户</a></div>\<div class="txtC"><a href="'+this.recoverUrl+'"target="_blank">忘记密码</a></div>\<div class="txtR"><a href="http://passport.sohu.com/help/"target="_blank">帮助中心</a></div>\</div>\</div>\</form>'},drawLoginForm:function(){this._drawLoginForm();var inputs=this.cElement.getElementsByTagName("input");for(var i=0;i<inputs.length;i++){if(inputs[i].name=="email")this.emailInput=inputs[i];if(inputs[i].name=="password")this.passwdInput=inputs[i];if(inputs[i].name=="persistentcookie")this.pcInput=inputs[i]}this.loginMsg=this.cElement.getElementsByTagName("h3")[0];this.pcInput.onclick=function(){if(PassportSC.pcInput.checked==false)return;var confirm=window.confirm("浏览器将在两周内保持通行证的登录状态，网吧或公共机房上网者请慎用。您能确认本次操作吗？");if(confirm==false){PassportSC.pcInput.checked=false}};this.bindSelector();this.emailInput.value=this.email;if(this.emailInput.value=="")setTimeout(function(){PassportSC.emailInput.focus()},50);else setTimeout(function(){PassportSC.passwdInput.focus()},50)},bindSelector:function(){if(this.bindDomainSelector){this.curDSindex=-1;this.emailInput.onblur=function(){PassportSC.doSelect()};try{this.emailInput.addEventListener('keypress',this.checkKeyPress,false)}catch(e){try{this.emailInput.attachEvent("onkeypress",this.checkKeyPress);this.emailInput.attachEvent("onkeydown",this.checkKeyDown)}catch(e){}}}},drawPassport:function(element){if(typeof(element)!="object"){return}this.init(element);if(this.cookie&&this.cookie['userid']!=''){if(this.autopad!=""){var at=this.cookie['userid'].indexOf("@");if(at>0){if(this.autopad!=this.cookie['userid'].substr(at+1)){this.drawLoginForm();return}}}if(PassportSC.autoRedirectUrl!=""){document.location.href=this.autoRedirectUrl}else{this.drawPassportCard()}}else{this.drawLoginForm()}},autoHTTPS:function(){if(document.location.protocol=='http:'){this.usehttp=1}}};